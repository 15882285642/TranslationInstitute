[原文地址](https://medium.com/@cscalfani/so-you-want-to-be-a-functional-programmer-part-5-c70adc9cf56a#.1f83u8efv) 译者：墨白

刚开始学习函数式编程时，理解函数式编程的核心概念是最重要的，有些时候也是最难的一步。但其实没必要一定如此。这个没有正确的答案。

## 引用透明（referential transparency）

引用透明是一个比较有想象力的术语，它是用来描述纯函数可以被它的表达式安全的替换。一个例子可以帮助理解这个术语。

在代数中，你有一个下面的公式：
`y = x + 10`

然后被告知：
`x = 3`

你可以把x的值带入到之前的方程中，得到：
`y = 3 + 10`

注意这个方程仍然是有效的。我们可以利用纯函数做一些相同类型的替换。

下面是一个Elm的方法，在传入的字符串两边加上单引号：
```
quote str =
  "'" ++ str ++ "'"
```

下面是使用它的代码：
```
findError key =
  "Unable to find " ++ (quote key)
```

代码中，当查询`key`值失败时，`findError`构建了一个报错信息。

因为`queto`方法是纯函数，我们可以简单地将`quote`函数体（仅仅只是个表达式）替换掉在`findError`中的方法调用：
```
findError key =
  "Unable to find " ++ ("'" ++ str ++ "'")
```

这就是我称为“反向重构”（它对我而言有更多的意义），一个可以被程序员或者程序（例如编译器和测试程序）用来推理代码的过程。

## 执行顺序

大部分程序是单线程的，即有且只有一段代码在当前执行。即使你有多线程的程序，大部分程序仍然阻塞等待I/O去完成，例如，file，network等等。

这也是当我们编写代码的时候，我们很自然考虑按次序来编写代码：
```
1. 拿到面包
2. 把2片面包放入烤面包机
3. 选择加热时间
4. 向下推杆
5. 等待面包片弹出
6. 取出烤面包
7. 拿黄油
8. 拿黄油刀
9. 制作黄油面包
```

在这个例子中，有两个独立的操作：拿黄油以及加热面包。它们在step9时开始变得相互依赖。

我们可以在step1到6的时候做step7和8因为它们之间相互独立。

但当我们开始做的时候，事情开始复杂了：
```
线程1：
--------
1. 拿到面包
2. 把2片面包放入烤面包机
3. 选择加热时间
4. 向下推杆
5. 等待面包片弹出
6. 取出烤面包

线程2：
1. 拿黄油
2. 拿黄油刀
**3. 等待线程1完成**
4. 制作黄油面包
```

如果线程1失败，线程2怎么办？
